// 源さん（62歳、元サラリーマン、将棋歴40年）のコメントデータ

function pick(arr: string[]): string {
  return arr[Math.floor(Math.random() * arr.length)];
}

export function getTimeBasedGreeting(): string {
  const hour = new Date().getHours();
  if (hour >= 5 && hour < 10) {
    return pick([
      'おはよう！朝の一局は頭がスッキリするで',
      '早起きやな！朝のうちに一局やるか',
      'おっ、おはよう。コーヒー入れたとこや',
      '朝の将棋は格別やで。さ、やろか',
      '朝露がきれいやなぁ。ほな一局やるか',
      'おはよう！今日も縁台の調子はバッチリやで',
    ]);
  } else if (hour >= 10 && hour < 17) {
    return pick([
      'よっ、来たな！ちょうど暇してたんや',
      'いい時間やな。一局いこか',
      'おっ、久しぶり…って昨日も来てたな笑',
      '今日もええ天気や。縁台将棋日和やで',
      'お昼食べてちょうどええ感じや。やるか！',
      'おっ、待ってたで。日向ぼっこしながらやろか',
    ]);
  } else if (hour >= 17 && hour < 22) {
    return pick([
      'お疲れさん！仕事帰りか？一局やるか',
      '夕方の将棋もなかなかオツなもんやで',
      'おっ、来たな。晩飯前にサクッと一局？',
      '今日も一日頑張ったやろ。将棋で頭のリセットや',
      '夕焼けがきれいやなぁ。将棋日和の締めくくりや',
      '風呂入る前に一局やろか。ちょうどええやろ',
    ]);
  } else {
    return pick([
      'おいおい、こんな時間にまだ起きとるんか笑',
      '夜更かしやなぁ。…ワシもやけど',
      '深夜の将棋は不思議と集中できるんよな',
      'シーッ…嫁さんに見つかるで笑',
      '夜中の将棋はな、静かでええんよ',
      'こんな時間に将棋…仲間やな笑',
    ]);
  }
}

export function getReviewComments(playerWon: boolean, moveCount: number): string[] {
  const comments: string[] = [];

  if (playerWon) {
    comments.push(pick([
      'いやー、完敗や。見事やったで',
      'お前さん、だいぶ強なったなぁ',
      '負けたわ〜。でも気持ちのええ負け方やったで',
      '参った参った。ワシも歳やなぁ',
      'やるなぁ。弟子に取りたいくらいやで',
      'これはワシの作戦負けやな。認めるわ',
      '見事や！最後の寄せが光ってたで',
      'お前さんの将棋、筋がええわ',
      'ワシの40年の経験が通じんかったか…',
      'いやぁ、お見事。脱帽や',
      '負けたけどな、楽しかったわ。これが将棋の醍醐味や',
    ]));
  } else {
    comments.push(pick([
      'ドンマイドンマイ。ワシも最初は負けてばっかやったで',
      '惜しかったなぁ。あとちょっとやったのに',
      '次はもっとええ勝負になるで',
      '負けて覚える将棋かな。大事なんはここからやで',
      'うーん、途中まではよかったんやけどなぁ',
      '今日はワシの調子がよかっただけや。気にすんな',
      'ここで諦めたらあかんで。ワシと続けよ',
      '悔しいやろ？その悔しさが成長の種やで',
      'まだまだこれからや。焦ることない',
      'プロかて負ける日はあるんやで。切り替えいこ',
      'ワシが強すぎた…のかもしれんし、そうでもないかもしれん笑',
    ]));
  }

  if (moveCount < 40) {
    comments.push(pick([
      '短い対局やったな。次はもっとじっくり指そか',
      'あっという間やったな。もう一丁いこか',
      'サクッと終わったな。短期決戦もまたよし',
    ]));
  } else if (moveCount > 80) {
    comments.push(pick([
      '長い熱戦やったなぁ！こういう将棋が一番おもろいんや',
      '大熱戦やったわ。お互いよう頑張ったで',
      'しんどかったけど、おもろかったなぁ。これぞ縁台将棋や',
    ]));
  } else {
    comments.push(pick([
      'ちょうどええ長さの対局やったな',
      'バランスのとれた将棋やったで',
      'なかなか見応えのある将棋やったなぁ',
    ]));
  }

  comments.push(pick([
    '将棋はな、負けた時が一番成長するんやで',
    'また明日もやろな。ワシはいつでもここにおるから',
    '今日の一局、ええ勉強になったやろ？',
    'お茶でも飲んでいきぃや',
    'もう一局やるか？ワシはまだまだ元気やで',
    'ほんま将棋はおもろいな。何十年やっても飽きん',
    '今度は作戦変えてきてみぃ。楽しみにしとるで',
    'こうやって縁台で将棋指すのが一番の贅沢やな',
    'せんべいでも食べながらゆっくりしていきぃ',
    'ワシもまだまだ勉強せなあかんなぁ',
    '将棋は一生もんの趣味やで。大事にしよな',
  ]));

  return comments;
}

// --- 対局開始 ---
const gameStart = [
  'よっ、今日もやるか！さぁ座り座り',
  'おっ、来たな！今日は負けへんで〜',
  'お茶入れたとこや。さ、一局いこか',
  'よう来たな〜。ほな始めよか',
  'おっ、待ってたで！調子はどうや？',
  'さぁさぁ、今日も縁台将棋やで〜',
  'ええ天気やし、一局やろか！',
];

// --- 序盤コメント（最初の10手） ---
const openingPhase = [
  '居飛車か振り飛車か…ワシはどっちも好きやけどな',
  '序盤はな、家の基礎みたいなもんや。しっかり組まんと',
  'お、矢倉に組むんか？渋い選択やなぁ',
  '四間飛車か！攻めっ気があってええな',
  'まずは駒組みやな。焦らんでええで',
  '序盤から飛ばすなぁ。若さやな',
  'しっかり守ってからの攻め、基本やで',
  '美濃囲いか？堅実でええと思うで',
  'ほぉ、そっちから来るか。面白い出だしやな',
  '角道を開けたな。攻める気満々やないか',
  '飛車先を突くか。正統派やなぁ',
  'この出だし、プロでもよう見る形やで',
  'まだ序盤やし、ゆっくり考えぃ',
  'どんな作戦で来るんかな。楽しみやで',
  'お互い駒組みの時間やな。じっくりいこか',
  '序盤は我慢の時間や。でもここで差がつくんやで',
  'なるほどなぁ、こういう序盤もあるんやな',
];

// --- 中盤コメント（11-40手） ---
const middlePhase = [
  'ここからが勝負やで。読みの深さが出る',
  'なかなかの攻め筋やな。ワシも負けてられんわ',
  'おっと、そこ来るか。予想外やったわ',
  '中盤はな、一手のミスが命取りになるんや',
  'お互い攻め合いやな。こりゃ面白なってきたで',
  '手が見えてきたなぁ。ええ感じやで',
  'ここで仕掛けるか。度胸あるなぁ',
  'ワシもそろそろ本気出すで〜',
  '駒がぶつかり合ってきたな。激しいわ',
  'なかなか難しい局面やな。ワシも悩むわ',
  'この局面、考えがいがあるなぁ',
  'お前さんの攻め、なかなかキレあるで',
  'ここは我慢のしどころやな',
  'じわじわ形勢が動いてきたなぁ',
  '手筋が決まったな！上手いわ',
  'この辺が正念場やで。集中集中',
  'なるほど、そういう構想かいな',
  '中盤戦、ワシの好きな時間やで',
];

// --- 終盤コメント（41手以降） ---
const endPhase = [
  '終盤は速度や。1手の差が勝敗を分ける',
  '詰みがあるかもしれんで…よく見てみ',
  'ワシの玉がだいぶ危ないなぁ…',
  '終盤やな。ここからは時間との勝負や',
  '寄せに入ったか…鋭いなぁ',
  '最後まで気を抜いたらあかんで',
  'この辺が勝負の分かれ目やな',
  '終盤力が問われるで。踏ん張りどころや',
  '王様が薄いなぁ…大丈夫かいな',
  '決め手を逃したらあかんで。慎重にな',
  'もう終盤か。早いなぁ',
  'ここからは読みの正確さが全てや',
  '詰むや詰まざるや…ええ局面やで',
  'お互い玉が危ないな。最後の勝負や',
  '終盤はな、「頭の中の将棋盤」で勝負が決まるんや',
  '最後の最後まで分からんのが将棋やで',
  'クライマックスやな。ワシも気合入れるで',
  '一手間違えたら逆転や。怖いなぁ',
];

// --- 特定の駒に関するコメント ---
const pieceComments: Record<string, string[]> = {
  bishopExchange: [
    '角交換は戦いの始まりや',
    '角の使い方で棋力が分かるんやで',
    '角交換か！一気に激しなるなぁ',
    '角が手に入ったら、どこに打つかが勝負やで',
    '角交換したら持ち角の打ち場所を考えな',
  ],
  rook: [
    '飛車は大事にせなあかん。働かせてこそ飛車や',
    '飛車の位置でだいたい作戦が分かるんや',
    '飛車を成らせたらでかいで〜',
    '飛車は攻めの大将やからな。大事にせなあかん',
    '飛車を振るか振らんかで将棋は変わるんや',
  ],
  silver: [
    '銀は攻めにも守りにも使える万能選手やな',
    '銀の使い方がうまい人は強いで',
    '割り打ちの銀は気持ちええなぁ',
    '銀は前に進むのは得意やけど、下がるのは苦手やで',
    '銀の繰り替え、渋い手やな',
  ],
  knight: [
    '桂馬は面白い駒やで。変則的な動きが味方にも敵にもなる',
    '桂馬の高跳び歩の餌食…気をつけや',
    '桂馬って不思議な駒やろ？ワシは好きやけどな',
    '桂の王手は受けにくいんやで。覚えとき',
    '桂馬は控えに打て、ってよう言うやろ',
  ],
  lance: [
    '香車の田楽刺し、決まったら気持ちええで',
    '香車はな、地味やけど終盤で光る駒なんや',
    '端から香車がビューンと…これが気持ちええんよ',
  ],
  gold: [
    '金は守りの要やで。王様の側におるのが仕事や',
    '金が離れると玉が寒いなぁ',
    '金の使い方で棋風が出るんや',
  ],
};

// --- 対局の流れに応じたコメント ---
const flowComments = {
  aiAdvantage: [
    'ちょっと押されてるなぁ…',
    'うーん、これは参った',
    '厳しい局面やな…ワシも考えんと',
    'なかなかやるなぁ。油断でけへんわ',
    'お前さんの攻めが厳しいわ…',
  ],
  playerAdvantage: [
    'よっしゃ、ワシの番やで',
    'こっからが本番や',
    'ふふ、ちょっとワシが良さそうやな',
    'ここはワシのペースやで〜',
    'こっちも攻め返すで！',
  ],
  even: [
    'じっくり考えよか。急ぐことない',
    '持久戦になりそうやな',
    'お互い互角やな。ええ勝負や',
    'どっちに転ぶか分からんなぁ。おもろい',
    '一進一退やな。これぞ将棋やで',
  ],
};

// --- プレイヤーが指した時 ---
const playerMoveGeneral = [
  'ほぉ〜',
  'なるほどなぁ',
  'ふむふむ',
  'ほほぅ',
  'はいはい',
  'ふーん、そうきたか',
  'うんうん',
  'へぇ〜',
  'ふぅん',
  'ほいほい',
  'なるほどな',
  'ほー',
  'ふむ…',
  'はぁ〜そうか',
  'うーん',
];

const playerMoveGood = [
  'おっ、やるやないか！',
  'その手は見えてなかったわ',
  'シブい手やな〜',
  'おぉ〜ええ手やないか',
  'なかなかやるなぁ！',
  'うまいっ！ワシも見習わなあかんな',
  'こりゃ参ったなぁ',
  'ほぉ〜、考えとるねぇ',
  'やるなぁ！筋がええわ',
  'センスあるで、その手',
  'おっ、いい読みしとるなぁ',
  'ワシが教えたいくらいの手やで',
  '鋭いっ！',
  'その手、プロでも指すで',
  'ええ手やなぁ。感心するわ',
];

const playerCapture = [
  'いただきます、っと…って取られたんかいな！',
  'あちゃー取られたわ',
  'おいおい、それ大事にしてたんやで',
  'あーあ、持ってかれたか〜',
  'くぅ〜、痛いとこ突くなぁ',
  'マジか…それ取るか普通',
  'うげっ、取られた…',
  'あ痛たた…いい駒持ってかれたわ',
  'そこ取るか〜。さすがやな',
  '取られてもた。ワシの計算ミスや',
  'いてて…駒損やなぁ',
  'はぁ〜取られたか。しゃーない',
  'くそぅ、いい駒を…',
  'まさかそこ取りにくるとは…',
  'あかん、大事な駒が…',
];

const playerBigPiece = [
  '大駒出してきたな、攻めっ気あるねぇ',
  'おっ、飛車角使いにいくか！',
  'でかいの動かしてきたなぁ',
  '大胆やな〜、嫌いやないで',
  'ここで大駒か…やるなぁ',
  '大駒を活用してきたな。ええ感じやで',
  '飛車角の使い方、なかなかのもんや',
  '大駒がよう働いてるなぁ',
];

const playerPawnPush = [
  '歩の突き方で棋力がわかるんやで',
  '歩か…地味やけど大事な一手やな',
  'コツコツいくタイプか、ええぞ',
  '歩突きは将棋の基本や！',
  'じわじわ来るなぁ',
  '歩は将棋の命やで。大事にせなあかん',
  '一歩の差で局面が変わるんやなぁ',
  '歩の手筋は奥が深いで',
];

// --- AIが指す時 ---
const aiThinking = [
  'うーん...',
  'ちょっと待ってな...',
  'ここは...なるほど',
  'えーっと、どないしよかな...',
  'む、これは悩むなぁ...',
  'ちょい考えさせてな...',
  'ワシの番やな…うーむ',
  'ほな、ワシも考えるで…',
  'さてと…どこにしよかな',
  'ふむ…この局面は…',
  'ちょっと時間くれや…',
  'いやぁ、悩むなぁ',
  'ワシの頭もまだまだ現役やで…たぶん',
];

const aiMoved = [
  'えいっ',
  'これでどうや？',
  'ここしかないやろ',
  'ほい、ワシはこれや',
  'こんなもんやろ',
  'どや！',
  'ふふ、これや',
  'まぁ、こういう手もあるわな',
  'ほな、ここいっとくか',
  'ぱしっ！',
  'これやこれ',
  'こないしとこか',
  'ワシの読みを見せたるわ',
  'よっ、と',
  'ここやな',
];

// --- 王手 ---
const checkGiven = [
  '王手！どうするんや〜',
  '王手やで！逃げられるかな〜？',
  'ほれ、王手！',
  '王手！ここがワシの見せ場や',
  '王手やで〜！さぁどうする？',
  'おっと、王手！ワシもやるやろ？',
];

const checkReceived = [
  'おっと王手か、焦るなぁ',
  'うわっ、王手きたか！',
  'ぬぬ、王手か…ちょい待って',
  'あちゃ〜、王手やんけ！',
  '王手か！やるなぁお前さん',
  'おいおい、王手かいな。鋭いっ',
  '王手…！油断してたわ',
];

// --- 成り ---
const promoteByAI = [
  'おりゃ！成ったで！',
  '成り！ここからが本番や',
  'ふふ、成らせてもらうで〜',
  'パワーアップや！',
  '成り！これでワシの駒が強なるで',
  'ほれ、成ったで〜！',
];

const promoteByPlayer = [
  '龍を作られたか…まずいなぁ',
  '成られたか〜、こりゃ厄介やで',
  'うわ、成ってきた。ピンチやな',
  'あかん、成られてもた',
  '成られた…これは困るなぁ',
  '馬を作られるのが一番嫌やねん',
];

// --- 対局終了 ---
const gameEndPlayerWins = [
  '参りました！いや〜今日は完敗や。もう一局やろ？',
  'やられたわ〜。お前さん強いなぁ。もう一回！',
  '参った参った！悔しいから即もう一局や！',
  'うーん、完敗や。でもええ将棋やったわ',
  '負けたわ〜。次こそは！な？',
  '見事！ワシの負けや。お前さん成長したなぁ',
  'いやー、参った。今日はお前さんの日やな',
  'くっ…次は本気出すで笑',
  '負けてもた…でもスッキリする将棋やったわ',
  'お前さんに負けるんは悔しいけど、嬉しくもあるわ',
  '完敗や！ワシも修行し直しやな',
];

const gameEndAIWins = [
  'やったな！ワシの勝ちや！ま、次があるで',
  'ふっふっふ、まだまだ若いもんには負けへんで〜',
  '勝ったで〜！でもなかなかええ勝負やったわ',
  'ワシの勝ちや！40年の経験をなめたらあかんで',
  'ま、今日はワシに分があったな。もう一局やろ？',
  '勝っちゃった…でもお前さんも強なってるで',
  'ワシの勝ち！次は手加減せえへんで…してたっけ？笑',
  'よっしゃ！まだまだ現役やで！',
  '辛勝やわ〜。危なかったで実は',
  'ワシの勝ちや。でもヒヤヒヤしたわ正直',
  '勝てたけどな、途中めっちゃ焦ったで笑',
];

// --- ランダムな独り言 ---
const randomMumble = [
  '今日の天気ええなぁ',
  'この前な、孫が来てな…ま、それはええわ',
  '腰痛いなぁ...お、次の手考えなあかん',
  'コーヒーもう一杯いるか？',
  'そういえば昨日のプロ野球見たか？',
  '隣のおっちゃんにも将棋教えたろかな',
  'あ、せんべい食うか？ほれ',
  '最近の若い子はスマホで将棋やるんやな〜',
  '今度の日曜、公園で将棋大会あるらしいで',
  'ワシが若い頃はなぁ…って年寄りの話はええか',
  'この縁台、もう20年使ってるんやで',
  '夕飯なに食おかなぁ…カレーにしよ',
  'あっ、蚊に刺された…痒いなぁ',
  'そうそう、この前テレビで見たんやけどな…ま、ええわ',
  '最近な、血圧が高いって言われてん。でも将棋は辞められんわ',
  '嫁さんが旅行行きたいって言うとるんやけど、ワシは将棋指してたいねん',
  '昨日テレビで藤井聡太の対局見てな、やっぱりプロは凄いわ',
  'コンビニのおにぎりな、最近美味しなったよな',
  '若い頃はもっと強かったんやで…たぶん',
  '今日の晩飯なんやろ。カレーやったらええなぁ',
  '孫がな、将棋やりたいって言い出してん。嬉しいやろ？',
  '公園のベンチでな、昔はよう将棋指したもんや',
  'コーヒーお代わりいる？…って、これアプリやったわ笑',
  'この間な、道で昔の同僚に会ってん。お互い歳取ったなぁ',
  '最近な、朝の散歩がワシの日課やねん。健康第一や',
  '昔の上司がな、めちゃくちゃ将棋強かってん。あの人に勝てたことないわ',
  '隣の奥さんがな、庭でバラ育ててるんや。きれいやで',
  '猫がおるなぁ…将棋盤の上に座るなよ…って、これアプリか',
  '駅前のたこ焼き屋、味変わったなぁ。前の方がよかったわ',
  '孫の運動会でな、ワシがリレー出る羽目になってん。死ぬかと思たわ',
  '定年してからの方がな、忙しい気がするんは気のせいか？',
  'そういえば今月、将棋道場の月例会あるんやった。出るかなぁ',
  '最近YouTubeで将棋の解説動画見るんやけど、分かりやすいなぁ',
  '嫁さんの手料理がな、最近レベルアップしてん。ありがたいわ',
  'テレビの時代劇でな、将棋指すシーンあってん。手順めちゃくちゃやったけど笑',
  '来週歯医者やねん…行きたないなぁ',
  '100均で買った扇子、めっちゃ使い心地ええで。パチンとやるやつ',
  '老眼がな、だいぶ進んでん。駒が見えにくいわ…',
  '将棋は頭の体操やと思ってやってるけど、実際どうなんやろ',
  '若い頃の先輩にな、「銀を使いこなせたら一人前」って言われたわ',
  '缶コーヒー、微糖が一番ちょうどええんよな',
  '明日雨やったかな…洗濯物取り込まなあかん',
  '将棋って不思議やな。何千年も前からあるのに飽きんのやから',
  '居飛車党の友達とな、毎回同じ戦型になるんや笑',
];

// --- 手数に関するコメント ---
const moveCountComments: Record<number, string[]> = {
  10: [
    'もう10手か。序盤が終わりかけやな',
    '10手目やで。そろそろ駒組みも仕上げの頃やな',
  ],
  20: [
    '20手か。ええペースやな',
    '20手目。中盤に入ってきたなぁ',
  ],
  30: [
    'もう30手目か。早いなぁ',
    '30手…結構進んだなぁ',
  ],
  40: [
    '40手か。いよいよ終盤に近づいてきたな',
    '40手目やで。長い勝負になってきたなぁ',
  ],
  50: [
    '50手！なかなかの長期戦やな',
    'もう50手か。お互い粘り強いなぁ',
  ],
  60: [
    '60手…大熱戦やで',
    '60手か！じっくりした将棋やなぁ',
  ],
  70: [
    '70手超えたか。腰が痛なってきたわ笑',
    '70手…長考の名局やな',
  ],
  80: [
    '80手！こりゃ歴史に残る一局やで笑',
    '80手か〜。お互い根気あるなぁ',
  ],
};

// --- ヒントコメント ---
const hintComments = [
  'ここなんかどうや？ワシならこう指すけどな',
  'うーん…ワシやったらここ指すかなぁ',
  'ちょっとだけヒントな。この辺がええと思うで',
  'こっそり教えたるわ。ここどうや？',
  'しょうがないなぁ、特別やで。ここ見てみ',
  'ここやで、ここ。…たぶん笑',
  'ワシの経験からいうとな、ここが良さげやで',
  '内緒やで？ここがええと思うわ',
];

// --- 待ったコメント ---
const undoComments = [
  'しゃーないな、今回だけやで笑',
  '「待った」は将棋の華や。…嘘やけど',
  'ワシも見なかったことにしとくわ',
  'ええよええよ、ワシも若い頃はよう「待った」したもんや',
  'ほんまは「待った」あかんのやけどな。まあ縁台やし',
  'しゃーないなぁ。今回は特別やで',
  '「待った」か。まぁ練習やしな、ええよ',
  '了解了解。ワシの勝ちに変わりはないけどな笑',
];

// --- エクスポート ---

export type CommentType =
  | 'gameStart'
  | 'playerMove'
  | 'playerCapture'
  | 'playerBigPiece'
  | 'playerPawnPush'
  | 'playerMoveGood'
  | 'aiThinking'
  | 'aiMoved'
  | 'checkGiven'
  | 'checkReceived'
  | 'promoteByAI'
  | 'promoteByPlayer'
  | 'gameEndPlayerWins'
  | 'gameEndAIWins'
  | 'randomMumble'
  | 'openingPhase'
  | 'middlePhase'
  | 'endPhase'
  | 'hint'
  | 'undo';

export function getComment(type: CommentType): string {
  switch (type) {
    case 'gameStart': return pick(gameStart);
    case 'playerMove': return pick(playerMoveGeneral);
    case 'playerCapture': return pick(playerCapture);
    case 'playerBigPiece': return pick(playerBigPiece);
    case 'playerPawnPush': return pick(playerPawnPush);
    case 'playerMoveGood': return pick(playerMoveGood);
    case 'aiThinking': return pick(aiThinking);
    case 'aiMoved': return pick(aiMoved);
    case 'checkGiven': return pick(checkGiven);
    case 'checkReceived': return pick(checkReceived);
    case 'promoteByAI': return pick(promoteByAI);
    case 'promoteByPlayer': return pick(promoteByPlayer);
    case 'gameEndPlayerWins': return pick(gameEndPlayerWins);
    case 'gameEndAIWins': return pick(gameEndAIWins);
    case 'randomMumble': return pick(randomMumble);
    case 'openingPhase': return pick(openingPhase);
    case 'middlePhase': return pick(middlePhase);
    case 'endPhase': return pick(endPhase);
    case 'hint': return pick(hintComments);
    case 'undo': return pick(undoComments);
  }
}

/** 駒に関するコメントを取得 */
export function getPieceComment(pieceType: string): string | null {
  if (pieceComments[pieceType]) {
    return pick(pieceComments[pieceType]);
  }
  return null;
}

/** 対局の流れに応じたコメントを取得 */
export function getFlowComment(flow: 'aiAdvantage' | 'playerAdvantage' | 'even'): string {
  return pick(flowComments[flow]);
}

/** 手数に応じたコメント */
export function getMoveCountComment(moveCount: number): string | null {
  const comments = moveCountComments[moveCount];
  if (comments) return pick(comments);
  return null;
}

/** 2〜4手に1回、独り言を挟むかどうか */
export function shouldMumble(moveCount: number): boolean {
  if (moveCount < 3) return false;
  if (moveCount % 2 === 0) return Math.random() < 0.45;
  if (moveCount % 3 === 0) return Math.random() < 0.6;
  return Math.random() < 0.25;
}
